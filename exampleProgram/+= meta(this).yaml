#
# Team data is our starting point.
#
team.yaml:
  - id: Alice
    name: Alice Wijaya
    location: Jakarta
    position: Experience Designer
  - id: Bob
    name: Bob Cardenas
    location: Lima
    position: Administrator
  - id: Carol
    name: Carol Davenhall
    location: Los Angeles
    position: President

# Use the person's `id` as the key for their data
teamByName = mapKeys(team.yaml, =id):

#
# Index page
# This is generated by invoking the index page template.
#
index.html = index.ori():

index.ori: |
  {{#map teamByName}}
    <a href="team/{{@key}}.html" style="display: inline-block;">
      <img src="thumbnails/{{@key}}.jpg" alt="Picture of {{name}}" style="display: block;" />
      {{name}}
    </a>
  {{/map}}

# Thumbnails are created by applying the thumbnail function to the headshots.
thumbnails = map(headshots, thumbnail):

#
# Team area
# This transforms the indexed data for a person using the person template.
#
team = map(teamByName, person.ori, '', '.html'):

person.ori: |
  <img src="../headshots/{{id}}.jpg" alt="Picture of {{name}}">
  <h2>{{name}}</h2>
  <div>
    {{position}}, {{location}}
  </div>
